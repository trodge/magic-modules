# Copyright 2017 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

--- !ruby/object:Api::Product
name: CloudWorkstations
display_name: Cloud Workstations
versions:
  - !ruby/object:Api::Product::Version
    name: beta
    base_url: https://workstations.googleapis.com/v1beta/
scopes:
  - https://www.googleapis.com/auth/cloud-platform
apis_required:
  - !ruby/object:Api::Product::ApiReference
    name: Cloud Workstations API
    url: https://console.cloud.google.com/apis/library/workstations.googleapis.com/
objects:
  - !ruby/object:Api::Resource
    name: 'WorkstationClusters'
    base_url: projects/{{project}}/locations/{{location}}/workstationClusters
    create_url: projects/{{project}}/locations/{{location}}/workstationClusters?workstationClusterId={{name}}
    update_verb: :PATCH
    description: |
      A grouping of WorkstationConfigs and their associated Workstations in a region.
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Official Documentation': 'https://cloud.google.com/workstations/docs/'
      api: 'https://cloud.google.com/workstations/docs/reference/rest/v1beta/projects.locations.workstationClusters'
    async: !ruby/object:Api::OpAsync
      operation: !ruby/object:Api::OpAsync::Operation
        path: 'name'
        base_url: '{{op_id}}'
        wait_ms: 1000
        timeouts: !ruby/object:Api::Timeouts
          insert_minutes: 60
          update_minutes: 60
          delete_minutes: 60
      result: !ruby/object:Api::OpAsync::Result
        path: 'response'
        resource_inside_response: true
      status: !ruby/object:Api::OpAsync::Status
        path: 'done'
        complete: true
        allowed:
          - true
          - false
      error: !ruby/object:Api::OpAsync::Error
        path: 'error'
        message: 'message'
    parameters:
      - !ruby/object:Api::Type::String
        name: 'location'
        description: 'The [Cloud Workstation location](https://cloud.google.com/workstations/docs/locations) for the cluster.'
        input: true
        url_param_only: true
    properties:
      - !ruby/object:Api::Type::String
        name: 'name'
        description: |
          Name of the requested resource.
        input: true
        required: true
      - !ruby/object:Api::Type::String
        name: 'displayName'
        description: |
          Human-readable name for this resource.
        input: true
        required: true
      - !ruby/object:Api::Type::String
        name: 'uid'
        description: |
          Output only. A system-assigned unique identified for this resource.
        output: true
      - !ruby/object:Api::Type::Boolean
        name: 'reconciling'
        description: |
          Output only. Indicates whether this resource is currently being updated to match its intended state.
        output: true
      - !ruby/object:Api::Type::KeyValuePairs
        name: 'annotations'
        description: |
          Client-specified annotations.
      - !ruby/object:Api::Type::KeyValuePairs
        name: 'labels'
        description: |
          Client-specified labels that are applied to the resource and that are also propagated to the underlying
          Compute Engine resources.
      - !ruby/object:Api::Type::String
        name: 'createTime'
        description: |
          Output only. Time when this resource was created.
        output: true
      - !ruby/object:Api::Type::String
        name: 'updateTime'
        description: |
          Output only. Time when this resource was most recently updated.
        output: true
      - !ruby/object:Api::Type::String
        name: 'deleteTime'
        description: |
          Output only. Time when this resource was soft-deleted.
        output: true
      - !ruby/object:Api::Type::String
        name: 'etag'
        description: |
          Checksum computed by the server.
          May be sent on update and delete requests to ensure that the client has an up-to-date value before proceeding.
      - !ruby/object:Api::Type::String
        name: 'network'
        description: |
          Name of the Compute Engine network in which instances associated with this cluster will be created.
      - !ruby/object:Api::Type::String
        name: 'subnetwork'
        description: |
          Name of the Compute Engine subnetwork in which instances associated with this cluster will be created.
          Must be part of the subnetwork specified for this cluster
      - !ruby/object:Api::Type::NestedObject
        name: 'privateClusterConfig'
        description: Configuration for private cluster.
        properties:
          - !ruby/object:Api::Type::Boolean
            name: 'enablePrivateEndpoint'
            required: true
            description: Whether Workstations endpoint is private.
          - !ruby/object:Api::Type::String
            name: 'clusterHostname'
            output: true
            description: |
              Output only. Hostname for the workstation cluster.
              This field will be populated only when private endpoint is enabled. To access workstations in the cluster,
              create a new DNS zone mapping this domain name to an internal IP address and a forwarding rule mapping that
              address to the service attachment.
          - !ruby/object:Api::Type::String
            name: 'serviceAttachmentUri'
            output: true
            description: |
              Output only. Service attachment URI for the workstation cluster. The service attachemnt is created when private endpoint is enabled.
              To access workstations in the cluster, configure access to the managed service using (Private Service Connect)[https://cloud.google.com/vpc/docs/configure-private-service-connect-services].
      - !ruby/object:Api::Type::Boolean
        name: 'degraded'
        description: |
          Output only. Whether this resource is in degraded mode, in which case it may require user action to restore full functionality.
          Details can be found in the conditions field.
        output: true
      - !ruby/object:Api::Type::Array
        name: 'conditions'
        output: true
        description: |
          Output only. Status conditions describing the current resource state.
        item_type: !ruby/object:Api::Type::NestedObject
          name: 'status'
          description: 'Message containing a status code, status message, and details.'
          properties:
            - !ruby/object:Api::Type::Integer
              name: 'code'
              description: |
                The status code.
            - !ruby/object:Api::Type::String
              name: 'message'
              description: |
                A developer-facing error message.
            - !ruby/object:Api::Type::Array
              name: 'details'
              item_type: Api::Type::String
              description: |
                A list of messages that carry the details.

